---
title: é€šç”¨é“¾è¡¨
categories: 
  - æ•°æ®ç»“æž„ä¸Žç®—æ³•
tags:
  - é“¾è¡¨
cover: https://picx.zhimg.com/80/v2-780e46650ff30bdbc695ad6419726975_720w.webp
abbrlink: 1cf810c0
date: 2022-11-01 18:31:24
---

# é€šç”¨é“¾è¡¨

## å‰è¨€

æˆ‘ä»¬ä¹‹å‰å†™çš„é“¾è¡¨åœ¨è¿›è¡Œæ’å…¥æ“ä½œçš„æ—¶å€™ï¼Œæ•°æ®åŸŸä¸­å­˜å‚¨çš„æ•°æ®æˆ‘ä»¬éƒ½æ˜¯åœ¨é“¾è¡¨æ’å…¥å‡½æ•°`llist_insert`ä¸­åˆ›å»ºçš„ï¼Œè¿™è‚¯å®šä¸ç¬¦åˆå¸¸ç†ã€‚å¦‚æžœç”¨è¿™æ ·ä¸€ä¸ªé“¾è¡¨å†™ä¸€ä¸ªç®¡ç†ç³»ç»Ÿï¼Œæ¯æ¬¡ç”¨æˆ·æƒ³è¦æ’å…¥æ•°æ®è¿˜è¦è‡ªå·±æ‰“å¼€æºä»£ç ä¿®æ”¹å—ï¼Ÿ

è€Œä¸”è¿˜æœ‰ä¸€ä¸ªè‡´å‘½çš„åœ°æ–¹ï¼Œå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„èŠ‚ç‚¹æ•°æ®åŸŸä¸­æ•°æ®çš„ä¸ªæ•°ç”¨æˆ·ä¹Ÿæ— æ³•è¿›è¡Œæ›´æ”¹ï¼Œæ‰€ä»¥ä¹‹å‰å†™çš„é“¾è¡¨åœ¨ä¸€äº›æƒ…æ™¯ä¸‹æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé€šç”¨æ€§å¼ºçš„é“¾è¡¨ã€‚

## é€šç”¨é“¾è¡¨å’Œæ™®é€šé“¾è¡¨

ä»€ä¹ˆæ˜¯é€šç”¨æ€§å¼ºçš„é“¾è¡¨å‘¢ï¼Œé€šè¿‡ä¸Šé¢é—®é¢˜çš„é˜è¿°ï¼Œæ’å…¥èŠ‚ç‚¹çš„æ•°æ®åº”è¯¥æ˜¯ç”±ç”¨æˆ·åˆ›å»ºã€‚ç”¨æˆ·è¿˜å¯ä»¥éšæ—¶å¢žåŠ æˆ–å‡å°‘æ•°æ®çš„ç±»åž‹å’Œä¸ªæ•°ã€‚

### æ•°æ®èŠ‚ç‚¹

ä»¥æœ‰å¤´åŒå‘å¾ªçŽ¯é“¾è¡¨ä¸ºä¾‹ï¼Œæˆ‘ä»¬çš„é€šç”¨é“¾è¡¨ä¹Ÿè¦åˆ›å»ºä¸ºåŒå‘å¾ªçŽ¯çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¿è¯æˆ‘ä»¬åˆ›å»ºå‡ºçš„é“¾è¡¨é€šç”¨æ€§è¦å¼ºï¼ˆè¯´çš„åºŸè¯ðŸ˜‚ï¼‰ã€‚å…ˆæ¥çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰å†™çš„æ™®é€šé“¾è¡¨ï¼Œæ˜¯ç”¨`LLIST`ä½œä¸ºé“¾è¡¨çš„èŠ‚ç‚¹è¿›è¡Œæ“ä½œçš„

```c
typedef struct llist_node
{
	int id;
	char name[NAMESIZE];
	int math;
	struct llist_node *prev;
	struct llist_node *next;
}LLIST;
```

å…¶ä¸­å­˜æ”¾äº†æ•°æ®`idã€nameã€math` å‰ç»§æŒ‡é’ˆ`prev`å’ŒåŽç»§æŒ‡é’ˆ`next`åˆ†åˆ«æŒ‡å‘å‰åŽèŠ‚ç‚¹ã€‚å…¶ä¸­çš„æ•°æ®ç”¨æˆ·æ˜¯æ— æ³•æ›´æ”¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ•°æ®åšä¸€äº›æ“ä½œï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿéšæ—¶æ–°å¢žéœ€è¦çš„æ•°æ®ã€‚

é‚£å¦‚ä½•å®žçŽ°æ•°æ®èƒ½å¤Ÿç”±ç”¨æˆ·è‡ªå®šä¹‰åˆ›å»ºå‘¢ï¼Œåªæœ‰ç”¨æˆ·æ‰èƒ½æ‡‚è‡ªå·±éœ€è¦ä»€ä¹ˆæ•°æ®ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦è¿™äº›æ•°æ®ã€‚æ‰€ä»¥åœ¨é€šç”¨æ€§é“¾è¡¨ä¸­ï¼ŒèŠ‚ç‚¹ä¸­çš„æ•°æ®å°±éœ€è¦ç”±ç”¨æˆ·è‡ªå·±æ¥æžå®šå•¦ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ç”¨æˆ·èƒ½çœ‹åˆ°çš„`main`å‡½æ•°ä¸­åˆ›å»ºä»¥ä¸‹ç»“æž„ä½“ã€‚

```c
#define NAMESIZE 20

struct stu//å®¢æˆ·è‡ªå·±åˆ›å»ºçš„æ•°æ®ç»“ä½“
{
	int id;
	char name[NAMESIZE];
	int math;
	int age;
	int tel;
};
```

ç”¨æˆ·å·²ç»åˆ›å»ºå‡ºè‡ªå·±éœ€è¦çš„æ•°æ®äº†ï¼Œæˆ‘ä»¬è¦åˆ›å»ºçš„æ˜¯ä¸€ä¸ªåŒå‘çš„é“¾è¡¨ï¼Œå‰é©±å’ŒåŽç»§æŒ‡é’ˆ`*prev *next`æ˜¯å¿…è¦çš„ï¼Œè¿žæŽ¥äº†å‰åŽä¸åŒçš„èŠ‚ç‚¹ï¼Œè€Œç”¨æˆ·åˆ›å»ºçš„æ•°æ®æ€Žä¹ˆå’Œæˆ‘ä»¬åŒ…å«å‰é©±å’ŒåŽç»§æŒ‡é’ˆçš„æ•°æ®èŠ‚ç‚¹ç»“åˆèµ·æ¥å‘¢ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨Cè¯­è¨€é‡Œçš„ä¸‡ç²¾æ²¹â€”â€”æŒ‡é’ˆã€‚

æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç”¨æˆ·åˆ›å»ºçš„æ•°æ®åŸŸï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°ç”¨æˆ·æ‰€åˆ›å»ºçš„æ•°æ®äº†ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•å¾—çŸ¥ç”¨æˆ·åˆ›å»ºçš„æ•°æ®åŸŸçš„ç±»åž‹ï¼Œè¿™é‡Œçš„æŒ‡é’ˆæ˜¯`void *`çš„ç±»åž‹ã€‚

```c
struct llist_node//æ•°æ®èŠ‚ç‚¹çš„ç»“æž„ä½“
{
	void *data;//dataæŒ‡é’ˆæŒ‡å‘æ•°æ®åŸŸ
	struct llist_node *prev;//prevæŒ‡é’ˆæŒ‡å‘å‰é©±
	struct llist_node *next;//nextæŒ‡é’ˆæŒ‡å‘åŽç»§
};
```

### åˆ›å»ºå¤´èŠ‚ç‚¹

æŽ¥ç€æˆ‘ä»¬å¼€å§‹è¦åˆ›å»ºå¤´èŠ‚ç‚¹äº†ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ™®é€šé“¾è¡¨åˆ›å»ºå¤´èŠ‚ç‚¹çš„`llist_create`

```c
LLIST *llist_create(void)
{
	LLIST *handler = NULL;//handleræŒ‡é’ˆæŒ‡å‘å¼€è¾Ÿå‡ºçš„å¤´èŠ‚ç‚¹

	handler = malloc(sizeof(LLIST));//å¼€è¾Ÿå¤´èŠ‚ç‚¹çš„ç©ºé—´
	if(handler == NULL)//åˆ¤æ–­å¤´èŠ‚ç‚¹ç©ºé—´æ˜¯å¦å¼€è¾Ÿå¤±è´¥
		return NULL;//å¼€è¾Ÿå¤±è´¥,ç»“æŸå‡½æ•°å¹¶ä¸”è¿”å›žNULL
	handler->prev = handler->next = handler;
	//è®©å¤´èŠ‚ç‚¹çš„prevæŒ‡é’ˆå’ŒnextæŒ‡é’ˆéƒ½å…ˆæŒ‡å‘è‡ªå·±(å¾ªçŽ¯çš„ç»“æž„)
	return handler;//è¿”å›žå¤´èŠ‚ç‚¹çš„åœ°å€
}
```

å› ä¸ºå…¶ä¸­æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸéƒ½æ˜¯æ”¾åœ¨ä¸€èµ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€è¾Ÿå¤´èŠ‚ç‚¹çš„ç©ºé—´æ—¶ï¼Œç›´æŽ¥ä½¿ç”¨`sizeof(LLIST)`å°±å¯ä»¥å¼€è¾ŸèŠ‚ç‚¹éœ€è¦çš„ç©ºé—´ã€‚

ä½†æ˜¯çœ‹çœ‹ä¸Šé¢æˆ‘ä»¬é€šç”¨é“¾è¡¨é‡Œåˆ›å»ºçš„æ•°æ®èŠ‚ç‚¹çš„ç»“æž„ä½“ï¼Œä¸¤ä¸ªæŒ‡é’ˆä¸ç”¨è¯´è¿™ä¸ª`void *`çš„å¤§å°æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è‚¯å®šæ˜¯ä¸çŸ¥é“çš„ï¼Œæˆ‘ä»¬å¾—åŽ»é—®åˆ›å»ºå®ƒçš„ç”¨æˆ·ï¼Œè®©ç”¨æˆ·å‘Šè¯‰æˆ‘ä»¬ä»–åœ¨æ•°æ®åŸŸä¸­åˆ›å»ºäº†å¤šå¤§çš„æ•°æ®ã€‚

æ‰€ä»¥æˆ‘ä»¬åˆ›å»ºå¤´èŠ‚ç‚¹æ—¶ï¼Œå°±éœ€è¦ç”¨æˆ·ä¼ ä»–åˆ›å»ºçš„ç»“æž„ä½“å¤§å°äº†ï¼Œæ—¢ç„¶è¿™æ ·å¤´èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­˜åœ¨ï¼Œå› ä¸ºå®ƒè¦æŠŠç”¨æˆ·ä¼ è¿‡æ¥çš„ç»“æž„ä½“å¤§å°`size`ï¼Œä¹Ÿè¦åƒå…¶ä»–çš„èŠ‚ç‚¹ä¸€æ ·æœ‰å‰é©±å’ŒåŽç»§æŒ‡é’ˆåŽ»å®Œæˆé“¾è¡¨åŸºæœ¬æ“ä½œã€‚

æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™é€šç”¨é“¾è¡¨é‡Œçš„å¤´èŠ‚ç‚¹ä¸“é—¨æ–°å»ºä¸€ä¸ªç»“æž„ä½“ï¼Œå­˜å‚¨ç”¨æˆ·åˆ›å»ºçš„ç»“æž„ä½“å¤§å°`size`ç”¨æ¥åˆ›å»ºæ•°æ®èŠ‚ç‚¹ã€‚

```c
typedef struct llist_head//å¤´èŠ‚ç‚¹çš„ç»“æž„ä½“
{
	int size;//ä¿å­˜å®¢æˆ·åˆ›å»ºçš„ç»“æž„ä½“çš„å¤§å°
	struct llist_node head;//å¤´èŠ‚ç‚¹éœ€è¦ä½¿ç”¨çš„æŒ‡é’ˆ
}LLIST;
```

è¿™æ ·å½“ç”¨æˆ·åˆ›å»ºå¤´èŠ‚ç‚¹æ—¶ï¼Œå°±éœ€è¦ä¼ ä»–æ‰€åˆ›å»ºçš„ç»“æž„ä½“å¤§å°`size`äº†ï¼Œä¸è¿‡ä¹Ÿç®€å•ä¸€æ ·ç”¨`sizeof(stu)`ä¼ è¿‡æ¥å°±è¡Œã€‚

åˆ°è¿™é‡Œæˆ‘ä»¬ä¹Ÿåªæ˜¯å®Œæˆå‡†å¤‡å·¥ä½œï¼ŒæŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹æ­£å¼åˆ›å»ºå¤´èŠ‚ç‚¹äº†ã€‚è¿˜è®°å¾—ä¸€èˆ¬é“¾è¡¨å¤´èŠ‚ç‚¹æ˜¯å¦‚ä½•åˆ›å»ºçš„å—ï¼Ÿåæ­£æˆ‘ä¸è®°å¾—äº†ï¼Œå“ˆå“ˆðŸ˜ï¼Œå…ˆæ¥å›žé¡¾ä¸€ä¸‹

```c
LLIST *llist_create(void)
{
	LLIST *handler = NULL;//handleræŒ‡é’ˆæŒ‡å‘å¼€è¾Ÿå‡ºçš„å¤´èŠ‚ç‚¹

	handler = malloc(sizeof(LLIST));//å¼€è¾Ÿå¤´èŠ‚ç‚¹çš„ç©ºé—´
	if(handler == NULL)//åˆ¤æ–­å¤´èŠ‚ç‚¹ç©ºé—´æ˜¯å¦å¼€è¾Ÿå¤±è´¥
		return NULL;//å¼€è¾Ÿå¤±è´¥,ç»“æŸå‡½æ•°å¹¶ä¸”è¿”å›žNULL
	handler->prev = handler->next = handler;
	//è®©å¤´èŠ‚ç‚¹çš„prevæŒ‡é’ˆå’ŒnextæŒ‡é’ˆéƒ½å…ˆæŒ‡å‘è‡ªå·±(å¾ªçŽ¯çš„ç»“æž„)
	return handler;//è¿”å›žå¤´èŠ‚ç‚¹çš„åœ°å€
}
```

é€šç”¨é“¾è¡¨çš„ç»“æž„ä½“å’Œæˆ‘ä»¬çš„æ™®é€šé“¾è¡¨å·®è·è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œè¿™é‡Œæˆ‘ä»¬æ…¢æ…¢æ¥åˆ†æžï¼š

è·Ÿç€æ™®é€šé“¾è¡¨åˆ›å»ºå¤´èŠ‚ç‚¹æ€è·¯ï¼ŒåŒæ ·çš„æˆ‘ä»¬ä¹Ÿæ˜¯éœ€è¦æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬å¼€è¾Ÿå‡ºçš„å¤´èŠ‚ç‚¹ï¼Œå…ˆæŠŠè¿”å›žçš„ä¸œè¥¿å‡†å¤‡å¥½ã€‚æŽ¥ç€ä¹Ÿæ˜¯å¼€è¾Ÿå¤´èŠ‚ç‚¹çš„ç©ºé—´ï¼Œç„¶åŽè¦æœ‰é”™è¯¯åˆ¤æ–­ï¼ˆå®Œæ•´çš„ç¨‹åºå¿…è¦çš„çŽ¯èŠ‚ï¼‰ã€‚

æŽ¥ä¸‹æ¥å°±æœ‰åŒºåˆ«äº†ï¼Œæˆ‘ä»¬å¯¹æ¯”ç»“æž„ä½“ï¼Œé€šç”¨é“¾è¡¨é‡Œå¤šäº†ä¸€ä¸ªç”¨æˆ·ä¼ è¿‡æ¥çš„`size`ï¼Œéœ€è¦ä¿å­˜åœ¨å¤´èŠ‚ç‚¹ä¸­ç•™ç€åˆ›å»ºå…¶ä»–èŠ‚ç‚¹æ—¶ä½¿ç”¨ã€‚è€Œå‰é©±å’ŒåŽç»§æŒ‡é’ˆè¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ

åœ¨å¤´èŠ‚ç‚¹çš„ç»“æž„ä½“é‡Œè¿˜æœ‰ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹çš„ç»“æž„ä½“ï¼Œé‡Œé¢å­˜çš„å°±æ˜¯æˆ‘ä»¬è¦ç”¨çš„æŒ‡é’ˆï¼Œé‚£ä»Žç»“æž„ä½“é‡Œé¢æ‹¿ä¸œè¥¿æˆ‘ä»¬å†ç†Ÿæ‚‰ä¸è¿‡äº†ã€‚`handler->head.prev` `handler->head.next` ï¼Œè¿™æ ·å°±æžå®šäº†ï¼Œæˆ‘ä»¬å†æŠŠè¿™ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹è‡ªå·±ä¸å°±è¡Œäº†ï¼ŸðŸ¤”å¬ç€å¥½åƒæ˜¯è¿™ä¹ˆå›žäº‹ï¼Œé‚£æ˜¯å’Œæ™®é€šé“¾è¡¨ä¸€æ ·ç›´æŽ¥æŒ‡å‘`handler`å—ï¼Ÿ

å†æ¥çœ‹çœ‹æˆ‘ä»¬å¤´èŠ‚ç‚¹çš„ç»“æž„ä½“ï¼Œå¤´èŠ‚ç‚¹éœ€è¦ç”¨åˆ°çš„æŒ‡é’ˆæ˜¯`llist_node`ç±»åž‹çš„ç»“æž„ä½“`head`ï¼Œå¦‚æžœæˆ‘ä»¬åƒæ™®é€šé“¾è¡¨ä¸€æ ·ç›´æŽ¥æŒ‡å‘`handler`æŒ‡å‘çš„å¹¶ä¸æ˜¯å¤´èŠ‚ç‚¹ï¼Œè€Œæ˜¯å¤´èŠ‚ç‚¹çš„ç»“æž„ä½“ã€‚

æ‰€ä»¥å¤´èŠ‚ç‚¹çš„å‰é©±å’ŒåŽç»§æŒ‡é’ˆæŒ‡å‘çš„åº”è¯¥æ˜¯`&handler->head`æœ€åŽæˆ‘ä»¬åˆ›å»ºå¤´èŠ‚ç‚¹çš„å‡½æ•°å°±å¤§ä½“å®Œæˆäº†ï¼š

```c
LLIST *llist_create(int size)
{
	LLIST *handler = NULL;//æŒ‡å‘å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆ

	handler = malloc(sizeof(LLIST));//ä¸ºå¤´èŠ‚ç‚¹å¼€è¾Ÿç©ºé—´
	if(handler == NULL)//åˆ¤æ–­å¤´èŠ‚ç‚¹æ˜¯å¦åˆ›å»ºå¤±è´¥
		return NULL;//å¤´èŠ‚ç‚¹åˆ›å»ºå¤±è´¥,ç»“æŸå‡½æ•°å¹¶ä¸”è¿”å›žNULL
	handler->size = size;//æŠŠå®¢æˆ·ç»“æž„ä½“å¤§å°å­˜å‚¨èµ·æ¥
	handler->head.prev = &handler->head;//å‰é©±æŒ‡é’ˆæŒ‡å‘è‡ªå·±
	handler->head.next = &handler->head;//åŽç»§æŒ‡é’ˆæŒ‡å‘è‡ªå·±
	
	return handler;//æŠŠæŒ‡å‘å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆè¿”å›ž
}
```

> è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯`&handler`ä¹Ÿå¥½ç†è§£ï¼Œ`handler`å®šä¹‰çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦å–ç»“æž„ä½“çš„æ•°æ®ï¼Œæ‰€ä»¥è¦åŠ `&`ï¼ˆè§£é‡Šçš„å¥½åƒä¸å¤ªå¥½ï¼ŒåŠªåŠ›ç†è§£ä¸€ä¸‹å§ðŸ¤“ï¼‰

### æ’å…¥æ“ä½œ

ä¸»è¦çš„å·®åˆ«éƒ½åœ¨ä¸Šé¢å†™å‡ºæ¥äº†ï¼ŒåŽé¢å¢žåˆ æ”¹æŸ¥çš„æ“ä½œåº”è¯¥éƒ½æ˜¯äº›ç»†èŠ‚ä¸Šçš„é—®é¢˜ï¼Œä»Žè¿™é‡Œå¼€å§‹æˆ‘ä»¬å°±æŠŠä¸¤ç§é“¾è¡¨çš„ä»£ç å†™åœ¨ä¸€èµ·è¿›è¡Œæ¯”è¾ƒäº†ã€‚ï¼ˆæœ‰å·®åˆ«å¤§çš„åœ°æ–¹å†ç»†å” ï¼Œå› ä¸ºæˆ‘ä¹Ÿå¿˜äº†å˜¿å˜¿ðŸ˜ï¼‰

```c
int llist_insert(LLIST *handler, const void *data, int mode)
{
    struct llist_node *p = &handler->head;//ä½¿ç”¨pæŒ‡é’ˆä»£æ›¿handleræ“ä½œ
    struct llist_node *newnode = NULL;//newnodeæŒ‡é’ˆæ–°åˆ›å»ºçš„æ•°æ®èŠ‚ç‚¹
    
    newnode = malloc(sizeof(struct llist_node));//å¼€è¾Ÿæ•°æ®èŠ‚ç‚¹
    if(newnode == NULL)//åˆ¤æ–­æ˜¯å¦å¼€è¾Ÿå¤±è´¥
        return -1;//æ•°æ®èŠ‚ç‚¹å¼€è¾Ÿå¤±è´¥ ç»“æŸå‡½æ•° è¿”å›ž-1
    
    newnode->data = malloc(handler->size);//å¼€è¾Ÿæ•°æ®ç©ºé—´
    if(newnode->data == NULL)//åˆ¤æ–­æ•°æ®ç©ºé—´æ˜¯å¦å¼€è¾Ÿå¤±è´¥
    {
        free(newnode);//é‡Šæ”¾æ•°æ®èŠ‚ç‚¹ç©ºé—´
        return -2;//æ•°æ®ç©ºé—´å¼€è¾Ÿå¤±è´¥ ç»“æŸå‡½æ•° è¿”å›ž-2
    }
    
    memcpy(newnode->data, data, handler->size);//æ‹·è´æ•°æ®
    
    switch(mode)
    {
            case: HEADINSERT : break;
            case: TAILINSERT : p = p->prev; break;
            default : free(newnode->data);//é‡Šæ”¾æ•°æ®ç©ºé—´
            		  free(newnode);//é‡Šæ”¾æ•°æ®èŠ‚ç‚¹ç©ºé—´
            		  return -3;//æ’å…¥æ¨¡å¼é€‰æ‹©æ•°ç™¾ ç»“æŸå‡½æ•° è¿”å›ž-3
    }
    newnode->next = p->next;
    newnode->prev = p;
    newnode->next->prev = newnode;
    newnode->prev->next = newnode;

    return 0;
}
```
